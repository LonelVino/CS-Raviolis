webpackJsonp([1],{"27Pl":function(e,t){},csec:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("woOf"),o=n.n(a),r=n("Xxa5"),l=n.n(r),i=n("exGp"),s=n.n(i),c=(n("S49b"),n("vLgD")),d="/api_v1/check_order";var u=n("1onU"),f=n("cAgV"),g={name:"OrderTable",components:{Pagination:u.a},directives:{waves:f.a},data:function(){return{listLoading:!1,tableKey:0,usr_id:13,order_items:null,tags:null,all_order_items:[],idx:0,dialogFormVisible:!1,dialogStatus:"",confirmLoading:!1}},created:function(){this.getList()},computed:{noTag:function(){return null==this.tags}},methods:{getList:function(){var e=this;return s()(l.a.mark(function t(){var n,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(c.a)({url:d+"/all_tags",method:"get"});case 3:for(n=t.sent,e.tags=n.data.infos,a=0;a<e.tags.length;a++)(o=e.tags[a].id,Object(c.a)({url:d+"/all_orders?tag_id="+o,method:"get"})).then(function(t){e.all_order_items.push(t.data.infos),e.getProdbyId(e.idx).then(e.idx++),setTimeout(function(){e.listLoading=!1},1500)}).catch(function(e){console.error(e)});console.log("ORDERS:",e.tags),console.log("ALL ORDER ITEMS:",e.all_order_items);case 8:case"end":return t.stop()}var o},t,e)}))()},getProdbyId:function(e){var t=this;return s()(l.a.mark(function n(){var a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(a=0;a<t.all_order_items[e].length;a++)t.all_order_items[e][a].gotten=1==t.all_order_items[e][a].gotten||1==t.all_order_items[e][a].gotten?1:0,t.$set(t.all_order_items[e][a],"ttl_price",t.all_order_items[e][a].itm_price*t.all_order_items[e][a].quantity),t.tags[e].usr_price+=t.all_order_items[e][a].itm_price*t.all_order_items[e][a].quantity;o()(t.tags[e],{order_items:t.all_order_items[e]});case 2:case"end":return n.stop()}},n,t)}))()},handleChangeGotten:function(e){var t,n=this,a={id:e.id,gotten:e.gotten};(t=a,Object(c.a)({url:d+"/check_one_ord",method:"put",data:t})).then(function(t){var a=0==e.gotten?"False":"True";n.$notify({title:"Success",message:"Status Changed into "+a.toUpperCase(),type:"success",duration:2e3})})},confirmDeleteItem:function(e){var t=this;this.$confirm("This operation will delete this item forever, are you sure?","Note",{confirmButtonText:"Confirm",cancelButtonText:"Cancle",type:"warning"}).then(function(){t.handleDeleteItem(e)}).catch(function(){t.$message({type:"info",message:"Delete cancled"})})},handleDeleteItem:function(e){var t=this;console.log("INDEX:",e),deleteUserOrderItem(e).then(function(){t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),t.refreshTable()}).catch(function(e){t.$notify({title:"Failed",message:"Delete failed",type:"danger",duration:2e3})})},confirmDeleteTag:function(e){var t=this;this.$confirm("This operation will delete this order forever, are you sure?","Note",{confirmButtonText:"Confirm",cancelButtonText:"Cancle",type:"warning"}).then(function(){t.handleDeleteTag(e)}).catch(function(){t.$message({type:"info",message:"Delete cancled"})})},handleDeleteTag:function(e){var t=this;console.log("INDEX:",e),deleteUserOrder(e).then(function(){t.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),t.refreshTable()}).catch(function(e){t.$notify({title:"Failed",message:"Delete failed",type:"danger",duration:2e3})})},refreshTable:function(){this.idx=0,this.getList()}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[e.noTag?n("div",{staticClass:"notify"},[e._v("\n    None\n  ")]):e._e(),e._v(" "),e._l(e.tags,function(t){return n("div",{staticClass:"orders"},[n("div",{staticClass:"user-order"},[n("el-row",{attrs:{gutter:12}},[n("el-col",{attrs:{span:3.5}},[n("el-card",{staticClass:"first-card",attrs:{shadow:"hover"}},[n("span",{staticClass:"first-card-txt"},[e._v(e._s(t.name))])])],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-card",{staticClass:"second-card",attrs:{shadow:"hover"}},[n("span",[e._v("  ORDER Duration: "+e._s(t.created)+" to "+e._s(t.ended)+" ")])])],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"remove-all"},[n("el-button",{staticStyle:{height:"3vw","margin-top":"-1vw","font-size":"1vw","font-weight":"bolder",color:"#a04949"},attrs:{type:"warning"},on:{click:function(n){return e.confirmDeleteTag(t.id)}}},[e._v("\n              Remove Orders\n            ")])],1)])],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,ref:"multipleTable",refInFor:!0,staticClass:"order-table",staticStyle:{width:"100%"},attrs:{data:t.order_items,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"50px",align:"center","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{label:"Product",width:"200px",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(" "+e._s(t.row.product_name))])]}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{label:"Unit Price",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(" "+e._s(t.row.itm_price)+" €")])]}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{prop:"quantity",label:"Quantity",align:"center","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"ttl_price",label:"Total",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v(" "+e._s(t.row.ttl_price)+" €")])]}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{label:"Has Gotten",width:"100px",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#02538C","inactive-color":"#B9B9B9"},on:{change:function(n){return e.handleChangeGotten(t.row)}},model:{value:t.row.gotten,callback:function(n){e.$set(t.row,"gotten",n)},expression:"scope.row.gotten"}})]}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{label:"Actions",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return["deleted"!=a.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.confirmDeleteItem(a.id)}}},[e._v("\n            Remove\n          ")]):e._e()]}}],null,!0)})],1)],1)})],2)},staticRenderFns:[]};var m=n("VU/8")(g,_,!1,function(e){n("lY1J"),n("27Pl")},"data-v-4da7d46e",null);t.default=m.exports},lY1J:function(e,t){}});
//# sourceMappingURL=1.b069f6729f16c36a5ddf.js.map