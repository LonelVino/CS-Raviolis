webpackJsonp([10],{Gro4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("woOf"),o=n.n(i),a=n("Xxa5"),r=n.n(a),l=n("exGp"),c=n.n(l),s=n("S49b"),u=n("vLgD"),d="/api_v1/cart";function f(t){return Object(u.a)({url:d+"/cart_items?cart_id="+t,method:"get"})}var m=n("1onU"),_=n("cAgV"),p={name:"cartTable",components:{Pagination:m.a},directives:{waves:_.a},data:function(){return{list:null,listLoading:!1,tableKey:0,showReviewer:!1,temp:{id:void 0,quantity:0,Product:{name:"",price:0,min_num:0,discout:"",cat:""},total:0},usr_id:1,cart:void 0,cart_items:null,tmp_prod_info:null,dialogFormVisible:!1,dialogStatus:"",confirmLoading:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;return c()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,i=t.usr_id,Object(u.a)({url:d+"/one_cart?usr_id="+i,method:"get"});case 3:n=e.sent,t.cart=n.data.cart_info,f(t.cart.id).then(function(e){t.cart_items=e.data.cart_itms_infos,setTimeout(function(){t.getProdbyId(),t.listLoading=!1},1500)}).catch(function(t){console.error(t)});case 6:case"end":return e.stop()}var i},e,t)}))()},getProdbyId:function(){var t=this;return c()(r.a.mark(function e(){var n,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.cart_items.length)){e.next=14;break}return t.cart_items[n].prod_name="",t.cart_items[n].dt_info="",t.cart_items[n].mini_num="",e.next=7,Object(s.d)(t.cart_items[n].product_id);case 7:i=e.sent,t.tmp_prod_info=i.data.prod_info,o()(t.cart_items[n],{prod_name:t.tmp_prod_info.name,dt_info:t.tmp_prod_info.dt_info,mini_num:t.tmp_prod_info.quantity_unit}),t.$set(t.cart_items[n],"ttl_price",t.cart_items[n].itm_price*t.cart_items[n].quantity);case 11:n++,e.next=1;break;case 14:console.log("this.cart_items: ",t.cart_items);case 15:case"end":return e.stop()}},e,t)}))()},compare:function(t){return function(e,n){var i=e[t];return n[t]-i}},sortChange:function(t){t.prop,t.order;this.tmp_list=this.list,this.list.sort(this.compare("a_score")),console.log(this.list)},handleChangeQuantity:function(t,e){var n;(n={id:t,quantity:e},Object(u.a)({url:d+"/update_cart_item",method:"put",data:n})).then(function(t){console.log(t)}).catch(function(t){console.error(t)})},confirmDelete:function(t){var e=this;this.$confirm("This operation will delete this information forever, are you sure?","Note",{confirmButtonText:"Confirm",cancelButtonText:"Cancle",type:"warning"}).then(function(){e.handleDelete(t)}).catch(function(){e.$message({type:"info",message:"Delete cancled"})})},handleDelete:function(t){var e,n=this;console.log("INDEX:",t),(e=t,Object(u.a)({url:d+"/delete_crt_item?id="+e,method:"delete"})).then(function(){n.$notify({title:"Success",message:"Delete Successfully",type:"success",duration:2e3}),n.getList()}).catch(function(t){n.$notify({title:"Failed",message:"Delete failed",type:"danger",duration:2e3})})},confirmDeleteAll:function(){var t=this;this.$confirm("This operation will delete this information forever, are you sure?","Note",{confirmButtonText:"Confirm",cancelButtonText:"Cancle",type:"warning"}).then(function(){t.handleDeleteAll(t.cart.id)}).catch(function(){t.$message({type:"info",message:"Delete cancled"})})},handleDeleteAll:function(t){var e,n=this;console.log("INDEX:",t),(e=t,Object(u.a)({url:d+"/delete_cart?id="+e,method:"delete"})).then(function(){n.$notify({title:"Success",message:"Delete All Successfully",type:"success",duration:2e3}),n.getList()}).catch(function(t){n.$notify({title:"Failed",message:"Delete All failed",type:"danger",duration:2e3})})}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"cart-table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,ref:"multipleTable",staticClass:"table",attrs:{data:t.cart_items,border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"50px",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"Product",width:"200px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(" "+t._s(e.row.prod_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"mini_num",label:"Num(1 Unit)",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"Unit",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(" "+t._s(e.row.itm_price)+" €")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Total",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(" "+t._s(e.row.ttl_price)+" €")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"dt_info",label:"Discount",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"Quantity",width:"250px",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input-number",{staticClass:"number-count",attrs:{min:1,step:1},on:{change:function(n){return t.handleChangeQuantity(e.row.id,e.row.quantity)}},model:{value:e.row.quantity,callback:function(n){t.$set(e.row,"quantity",n)},expression:"scope.row.quantity"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"Actions",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return["deleted"!=i.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.confirmDelete(i.id)}}},[t._v("\n            Remove\n          ")]):t._e()]}}])})],1)],1),t._v(" "),n("div",{staticClass:"remove-all"},[n("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.confirmDeleteAll()}}},[t._v("Remove All")])],1)])},staticRenderFns:[]};var v=n("VU/8")(p,h,!1,function(t){n("Oow9"),n("vF+v")},"data-v-999d7922",null);e.default=v.exports},Oow9:function(t,e){},"vF+v":function(t,e){}});
//# sourceMappingURL=10.a445e67044fed7a95aeb.js.map